---
title: "API Reference"
description: "Complete API reference for cogito"
author: "zoobzio"
published: 2024-12-01
updated: 2025-01-11
tags: [cogito, api, reference]
---

# API Reference

Complete API reference for cogito. For the most up-to-date documentation, see [pkg.go.dev/github.com/zoobzio/cogito](https://pkg.go.dev/github.com/zoobzio/cogito).

## Core Types

### Thought

```go
type Thought struct {
    ID        string    // Database-assigned UUID
    Intent    string    // Purpose of this thought
    TraceID   string    // Unique trace identifier
    ParentID  *string   // Parent thought (for branching)
    TaskID    *string   // Task grouping
    Session   *Session  // LLM conversation state
    CreatedAt time.Time
    UpdatedAt time.Time
}
```

#### Constructors

```go
func New(ctx context.Context, memory Memory, intent string) (*Thought, error)
func NewWithTrace(ctx context.Context, memory Memory, intent, traceID string) (*Thought, error)
func NewForTask(ctx context.Context, memory Memory, intent, taskID string) (*Thought, error)
```

#### Methods

```go
func (t *Thought) AddNote(ctx context.Context, note Note) error
func (t *Thought) SetContent(ctx context.Context, key, content, source string) error
func (t *Thought) SetNote(ctx context.Context, key, content, source string, metadata map[string]string) error
func (t *Thought) GetNote(key string) (Note, bool)
func (t *Thought) GetContent(key string) (string, error)
func (t *Thought) GetMetadata(key, field string) (string, error)
func (t *Thought) GetLatestNote() (Note, bool)
func (t *Thought) AllNotes() []Note
func (t *Thought) GetBool(key string) (bool, error)
func (t *Thought) GetFloat(key string) (float64, error)
func (t *Thought) GetInt(key string) (int, error)
func (t *Thought) Clone() *Thought
func (t *Thought) PublishedCount() int
func (t *Thought) GetUnpublishedNotes() []Note
func (t *Thought) MarkNotesPublished()
```

### Note

```go
type Note struct {
    ID        string
    ThoughtID string
    Key       string
    Content   string
    Metadata  map[string]string
    Source    string
    Created   time.Time
    Embedding Vector
}
```

### Memory

```go
type Memory interface {
    CreateThought(ctx context.Context, thought *Thought) (*Thought, error)
    GetThought(ctx context.Context, id string) (*Thought, error)
    GetThoughtByTraceID(ctx context.Context, traceID string) (*Thought, error)
    GetThoughtsByTaskID(ctx context.Context, taskID string) ([]*Thought, error)
    GetChildThoughts(ctx context.Context, parentID string) ([]*Thought, error)
    AddNote(ctx context.Context, note *Note) (*Note, error)
    GetNotes(ctx context.Context, thoughtID string) ([]Note, error)
    UpdateThought(ctx context.Context, thought *Thought) error
    DeleteThought(ctx context.Context, id string) error
    SearchNotes(ctx context.Context, embedding Vector, limit int) ([]NoteWithThought, error)
    SearchNotesByTask(ctx context.Context, embedding Vector, limit int) ([]*Thought, error)
}
```

### SoyMemory

```go
func NewSoyMemory(db *sqlx.DB) (*SoyMemory, error)
func (m *SoyMemory) Close() error
```

## Primitives

### Decision & Analysis

#### Decide

Binary yes/no decisions with confidence scores.

```go
func NewDecide(key, question string) *Decide
func (d *Decide) WithProvider(p Provider) *Decide
func (d *Decide) WithIntrospection() *Decide
func (d *Decide) WithSummaryKey(key string) *Decide
func (d *Decide) WithReasoningTemperature(t float32) *Decide
func (d *Decide) WithIntrospectionTemperature(t float32) *Decide
func (d *Decide) Scan(t *Thought) (*DecideResponse, error)
```

#### Analyze

Extract structured data into typed results.

```go
func NewAnalyze[T any](key, prompt string) *Analyze[T]
func (a *Analyze[T]) WithProvider(p Provider) *Analyze[T]
func (a *Analyze[T]) WithIntrospection() *Analyze[T]
func (a *Analyze[T]) Scan(t *Thought) (*T, error)
```

#### Categorize

Classify into one of N categories.

```go
func NewCategorize(key, question string, categories []string) *Categorize
func (c *Categorize) WithProvider(p Provider) *Categorize
func (c *Categorize) WithIntrospection() *Categorize
func (c *Categorize) Scan(t *Thought) (*CategorizeResponse, error)
```

#### Assess

Sentiment analysis with emotional scoring.

```go
func NewAssess(key, question string) *Assess
func (a *Assess) WithProvider(p Provider) *Assess
func (a *Assess) WithIntrospection() *Assess
func (a *Assess) Scan(t *Thought) (*AssessResponse, error)
```

#### Prioritize

Rank items by specified criteria.

```go
func NewPrioritize(key, criteria string, items []string) *Prioritize
func (p *Prioritize) WithProvider(provider Provider) *Prioritize
func (p *Prioritize) WithIntrospection() *Prioritize
func (p *Prioritize) Scan(t *Thought) (*PrioritizeResponse, error)
```

### Control Flow

#### Sift

Semantic gate - LLM decides whether to execute wrapped processor.

```go
func NewSift(name, criteria string, processor pipz.Chainable[*Thought]) *Sift
func (s *Sift) WithProvider(p Provider) *Sift
```

#### Discern

Semantic router - LLM classifies and routes to different processors.

```go
func NewDiscern(name, question string) *Discern
func (d *Discern) AddRoute(category string, processor pipz.Chainable[*Thought]) *Discern
func (d *Discern) WithProvider(p Provider) *Discern
```

### Memory & Reflection

#### Recall

Load another Thought and summarise its context.

```go
func NewRecall(key, traceID string) *Recall
func (r *Recall) WithProvider(p Provider) *Recall
```

#### Reflect

Consolidate current Thought's Notes into a summary.

```go
func NewReflect(key, prompt string) *Reflect
func (r *Reflect) WithProvider(p Provider) *Reflect
```

#### Checkpoint

Create persistent snapshot for branching.

```go
func NewCheckpoint(key string) *Checkpoint
```

#### Seek

Semantic search across Notes.

```go
func NewSeek(key, query string) *Seek
func (s *Seek) WithLimit(limit int) *Seek
func (s *Seek) WithEmbedder(e Embedder) *Seek
```

#### Survey

Search grouped by task.

```go
func NewSurvey(key, query string) *Survey
func (s *Survey) WithLimit(limit int) *Survey
func (s *Survey) WithEmbedder(e Embedder) *Survey
```

#### Forget

Remove notes by key.

```go
func NewForget(keys ...string) *Forget
```

#### Restore

Restore thought state from checkpoint.

```go
func NewRestore(checkpointKey string) *Restore
```

#### Reset

Clear all notes from thought.

```go
func NewReset() *Reset
```

### Session Management

#### Compress

LLM-summarise session history to reduce tokens.

```go
func NewCompress(targetMessages int) *Compress
func (c *Compress) WithProvider(p Provider) *Compress
```

#### Truncate

Sliding window session trimming (no LLM).

```go
func NewTruncate(keepMessages int) *Truncate
```

### Synthesis

#### Amplify

Iterative refinement until criteria met.

```go
func NewAmplify(key, criteria string, processor pipz.Chainable[*Thought]) *Amplify
func (a *Amplify) WithMaxIterations(n int) *Amplify
func (a *Amplify) WithProvider(p Provider) *Amplify
```

#### Converge

Parallel execution with semantic synthesis.

```go
func NewConverge(key, synthesisPrompt string, processors ...pipz.Chainable[*Thought]) *Converge
func (c *Converge) WithProvider(p Provider) *Converge
```

## Pipeline Helpers

```go
func Sequence(name string, processors ...pipz.Chainable[*Thought]) *pipz.Sequence[*Thought]
func Filter(name string, predicate func(context.Context, *Thought) bool, processor pipz.Chainable[*Thought]) *pipz.Filter[*Thought]
func Switch[K comparable](name string, condition func(context.Context, *Thought) K) *pipz.Switch[*Thought, K]
func Gate(name string, predicate func(context.Context, *Thought) bool) pipz.Processor[*Thought]
func Fallback(name string, processors ...pipz.Chainable[*Thought]) *pipz.Fallback[*Thought]
func Retry(name string, processor pipz.Chainable[*Thought], maxAttempts int) *pipz.Retry[*Thought]
func Backoff(name string, processor pipz.Chainable[*Thought], maxAttempts int, baseDelay time.Duration) *pipz.Backoff[*Thought]
func Timeout(name string, processor pipz.Chainable[*Thought], duration time.Duration) *pipz.Timeout[*Thought]
func Concurrent(name string, reducer func(*Thought, map[pipz.Name]*Thought, map[pipz.Name]error) *Thought, processors ...pipz.Chainable[*Thought]) *pipz.Concurrent[*Thought]
func Race(name string, processors ...pipz.Chainable[*Thought]) *pipz.Race[*Thought]
```

## Provider & Embedder

### Provider Management

```go
func SetProvider(p Provider)
func GetProvider() Provider
func WithProvider(ctx context.Context, p Provider) context.Context
func ProviderFromContext(ctx context.Context) (Provider, bool)
func ResolveProvider(ctx context.Context, stepProvider Provider) (Provider, error)
```

### Embedder Management

```go
func SetEmbedder(e Embedder)
func GetEmbedder() Embedder
func WithEmbedder(ctx context.Context, e Embedder) context.Context
func EmbedderFromContext(ctx context.Context) (Embedder, bool)
func ResolveEmbedder(ctx context.Context, explicit Embedder) (Embedder, error)
```

### OpenAI Embedder

```go
func NewOpenAIEmbedder(apiKey string, opts ...OpenAIEmbedderOption) *OpenAIEmbedder
func WithEmbeddingModel(model string, dimensions int) OpenAIEmbedderOption
func WithEmbedderBaseURL(url string) OpenAIEmbedderOption
func WithEmbedderHTTPClient(client *http.Client) OpenAIEmbedderOption
```

## Utilities

```go
func RenderNotesToContext(notes []Note) string
```

## Configuration

```go
var DefaultIntrospection = false
var DefaultReasoningTemperature = 0.0
var DefaultIntrospectionTemperature = 0.7
```
